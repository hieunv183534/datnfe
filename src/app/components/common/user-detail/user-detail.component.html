<p-dialog [resizable]="true" header="Thông tin người dùng" [(visible)]="visible" [modal]="true"
  [style]="{ width: '800px', padding: '0px' }" [baseZIndex]="10000" [draggable]="false" (onHide)="hide()">
  <div class="page">
    <div class="profile relative mb-3">
      <div class="flex relative">
        <div class="flex" style="
            background-image: url('../../../assets/img/qcao.png');
            width: 100%;
          ">
          <div class="bg-right-bottom bg-no-repeat w-10rem h-10rem border-round">
            <img class="logo absolute" style="top: 60%; left: 24px" [src]="
                startuperInfo.avatarUrl ??
                'https://fsiconnected.cloud/images/default-avatar.jpg'
              " width="120px" />
          </div>
        </div>
      </div>
    </div>
    <div class="info">
      <div style="border-bottom: 1px solid #d8dfe8; padding-left: 8px">
        <div class="name">{{ startuperInfo.name }}</div>
        <span>
          {{ startuperInfo.describe }}
        </span>
        <span class="flex flex-row align-items-start my-1">
          <div class="flex  w-1rem mr-1 mt-1">
            <img src="../././../../../assets/icons/Crosshairs.svg" alt="">
          </div>
          <span>
            {{ getPurpose(startuperInfo.purpose) }}
          </span>
        </span>
        <span *ngIf="startuperInfo.job==1" class="flex flex-row align-items-start my-1">
          <div class="flex  w-1rem mr-1 mt-1">
            <img src="../././../../../assets/icons/University.svg" alt="">
          </div>
          <span>
            {{ startuperInfo.university }}
          </span>
        </span>
        <span *ngIf="startuperInfo.job!==1 &&startuperInfo.workingPlace " class="flex flex-row align-items-start my-1">
          <div class="flex  w-1rem mr-1 mt-1">
            <i class="fa-solid fa-building"></i>
          </div>
          <span>
            {{ startuperInfo.workingPlace }}
          </span>
        </span>
        <span class="flex flex-row align-items-start my-1">
          <div class="flex  w-1rem mr-1 mt-1">
            <img src="../././../../../assets/icons/Calendar.svg" alt="">
          </div>
          <span>
            {{ getAge(startuperInfo.dateOfBirth) }} tuổi
          </span>
        </span>
        <span class="flex flex-row align-items-start my-1">
          <div class="flex  w-1rem mr-1 mt-1">
            <img src="../././../../../assets/icons/Positon.svg" alt="">
          </div>
          <span>
            {{ getArea(startuperInfo.location) }}
          </span>
        </span>
        <!-- <li>
            <img src="../../../../assets/icons/Follow.svg" class="text-xs" alt="">

            Có 1000 người theo dõi
          </li> -->
      </div>
      <p-tabView>
        <p-tabPanel [header]="headerName" *ngIf="startuperInfo.purpose != 0">
          <ul>
            <li *ngIf="startuperInfo.purpose == 1">
              <p>
                <b>Lĩnh vực của ý tưởng: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let _ideaField of getFields(
                      startuperInfo.ideaField ?? []
                    )
                  " [value]="_ideaField"></p-tag>
              </span>
            </li>
            <li *ngIf="startuperInfo.purpose == 1">
              <p-divider align="center">
                <b>Tôi cần tìm cộng sự có:</b>
              </p-divider>
              <p>
                <b>Kỹ năng chuyên môn: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let targetSpecialize of getSpecializies(
                      startuperInfo.targetSpecialize ?? []
                    )
                  " [value]="targetSpecialize"></p-tag>
              </span>
            </li>
            <li *ngIf="startuperInfo.purpose == 1">
              <p>
                <b>Điểm cộng kỹ năng mềm: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let requestSkill of getSkills(
                      startuperInfo.requestSkill ?? []
                    )
                  " [value]="requestSkill"></p-tag>
              </span>
            </li>
            <li *ngIf="startuperInfo.purpose == 1">
              <p>
                <b>Điểm cộng tính cách: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let requestPersonality of getPersonalities(
                      startuperInfo.requestPersonality ?? []
                    )
                  " [value]="requestPersonality"></p-tag>
              </span>
            </li>
            <li *ngIf="startuperInfo.purpose == 2">
              <p>
                <b>Lĩnh vực của ý tưởng: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let targetField of getTargetField(
                      startuperInfo.targetField ?? []
                    )
                  " [value]="targetField"></p-tag>
              </span>
            </li>
            <li *ngIf="startuperInfo.purpose == 4">
              <p>
                <b>Lĩnh vực của dự án: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let targetField of getTargetField(
                      startuperInfo.targetField ?? []
                    )
                  " [value]="targetField"></p-tag>
              </span>
            </li>
            <div *ngIf="startuperInfo.purpose == 3">
              <div *ngFor="let item of listProject; let i = index"
                class="flex justify-content-between flex-wrap history-search">
                <div class="flex align-items-center justify-content-center m-2">
                  <img class="image-history" [src]="
                      item.project.avatarUrl ??
                      'https://fsiconnected.cloud/images/default-avatar.jpg'
                    " alt="" width="100px" style="border-radius: 50%" />
                  <div class="flex align-items-center justify-content-center ml-2">
                    <ul>
                      <li>
                        <b><span>Tên dự án: </span> </b>
                        <span>{{ item.project.projectName }}</span>
                      </li>
                      <li>
                        <b><span>Mô tả dự án: </span> </b>
                        <span>{{ item.project.description }}</span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </ul>
        </p-tabPanel>
        <p-tabPanel header="Giới thiệu bản thân">
          <ul style="padding: 0px !important">
            <li>
              <p>
                <b>Kỹ năng chuyên môn: </b>
              </p>
              <span>
                <p-tag *ngFor="
                    let specialize of getSpecializies(
                      startuperInfo.specialize ?? []
                    )
                  " [value]="specialize"></p-tag>
              </span>
            </li>
            <li>
              <p>
                <b>Kỹ năng mềm nổi bật: </b>
              </p>
              <span>
                <ng-container *ngFor="
                    let personality of getSkills(startuperInfo.skill ?? [])
                  ">
                  <p-tag [value]="personality"></p-tag>
                </ng-container>
              </span>
            </li>
            <li>
              <p>
                <b>Tính cách nổi bật: </b>
              </p>
              <span>
                <ng-container *ngFor="
                    let personality of getPersonalities(
                      startuperInfo.personality ?? []
                    )
                  ">
                  <p-tag [value]="personality"></p-tag>
                </ng-container>
              </span>
            </li>
            <li>
              <p>
                <b>Thời gian khả dụng: </b>
              </p>
              <span>
                <p-tag :value="{{ getAvailableTime(startuperInfo.availableTime) }}" class="ml-1"></p-tag>
              </span>
            </li>

            <li *ngIf="startuperInfo.job == 1">
              <p>
                <b>Học vấn: </b>
              </p>
            </li>
            <li *ngIf="startuperInfo.job == 1">
              <p>
                <i class="pi pi-building mr-1"></i>
                <b> Trường học: </b> {{ startuperInfo.university }}
              </p>
            </li>
            <li *ngIf="startuperInfo.job == 1">
              <p>
                <i class="pi pi-briefcase mr-1"></i>
                <b> Ngành học: </b> {{ startuperInfo.universitySpecialized }}
              </p>
            </li>
            <li>
              <p>
                <b>Kinh nghiệm làm việc: </b>
                <span *ngIf="listWork.length == 0">Không có</span>
              </p>
              <p *ngFor="let item of listWork; let i = index">
                <span class="color-text">{{ item.position }}</span> tại
                <span class="color-text">{{ item.name }}</span>
                <span *ngIf="item.start || item.end" style="display: flex; margin-bottom: 3px">{{ getDate(item.start) }}
                  - {{ getDate(item.end) }}</span>
              </p>
            </li>
            <li>
              <p>
                <b>Hoạt động xã hội: </b>
                <span *ngIf="startuperInfo.activity; else invalidName">{{
                  startuperInfo.activity
                  }}</span>
              </p>
            </li>
            <li>
              <p>
                <b>Chứng chỉ thành tích: </b>
                <span *ngIf="startuperInfo.certificateAndAward; else invalidName">{{ startuperInfo.certificateAndAward
                  }}</span>
                <ng-template #invalidName> Không có </ng-template>
              </p>
            </li>
          </ul>
        </p-tabPanel>
        <p-tabPanel header="Bài viết">
          <p>Bài viết.</p>
        </p-tabPanel>
      </p-tabView>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div style="padding-top: 1.5rem">
      <p-button *ngIf="friendStatus == 0" label="Kết nối" icon="pi pi-share-alt"
        (onClick)="connectOnClick()"></p-button>
      <p-button *ngIf="friendStatus == 2" label="Thu hồi lời mời" icon="pi pi-times"
        (onClick)="cancelOnClick()"></p-button>
      <p-button *ngIf="friendStatus == 2 || friendStatus == 3" label="Xem lời mời" icon="pi pi-envelope"
        (onClick)="handleOpenRequest = true"></p-button>
      <p-button *ngIf="friendStatus == 3" label="Chấp nhận" icon="pi pi-check" (onClick)="acceptOnClick()"></p-button>
      <p-button *ngIf="friendStatus != -1" label="Trò chuyện" icon="pi pi-comments" class="p-button-success"
        (onClick)="chatOnClick()"></p-button>
      <p-button *ngIf="friendStatus == -1" label="Xóa tài khoản" icon="pi pi-times"
        (onClick)="deleteOnClick()"></p-button>
    </div>
  </ng-template>
</p-dialog>

<ng-container *ngIf="handleConnect">
  <app-modal-connect [display]="handleConnect" (close)="closeModal()"
    (requestConnect)="requestConnect()"></app-modal-connect>
</ng-container>

<ng-container *ngIf="handleOpenRequest">
  <app-modal-detail-connect [display]="handleOpenRequest" [friendStatus]="friendStatus"
    (close)="closeModalOpen()"></app-modal-detail-connect>
</ng-container>