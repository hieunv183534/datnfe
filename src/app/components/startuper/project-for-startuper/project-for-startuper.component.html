<form [formGroup]="formSearch">
  <div class="body-content">
    <div class="grid row">
      <div class="md:col-2">
        <h2 class="boLoc" style="margin-top: 16px !important">
          Bộ lọc tìm kiếm
        </h2>
        <div class="p-field col-12 md-12 marginTop">
          <p-dropdown
            [options]="relationWithProjects"
            optionValue="value"
            optionLabel="name"
            [style]="{ width: '100%' }"
            formControlName="relationWithProject"
            (onChange)="submitSearch()"
          ></p-dropdown>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="areas"
            optionLabel="name"
            formControlName="areas"
            defaultLabel="Khu vực"
          >
          </p-multiSelect>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="fields"
            optionLabel="name"
            formControlName="fields"
            defaultLabel="Lĩnh vực của dự án"
          >
          </p-multiSelect>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="projectStages"
            optionLabel="name"
            formControlName="stages"
            defaultLabel="Giai đoạn của dự án"
          >
          </p-multiSelect>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="availableTimes"
            optionLabel="name"
            formControlName="availableTimes"
            defaultLabel="Thời gian yêu cầu"
          >
          </p-multiSelect>
        </div>
        <div class="col-12 mt-2 flex justify-content-center">
          <p-button label="Áp dụng" (onClick)="submitSearch()"></p-button>
          <p-button
            label=" Cài lại "
            [style]="{
              backgroundColor: 'white',
              color: 'black'
            }"
            class="ml-5"
            (onClick)="clearSearch()"
          ></p-button>
        </div>
      </div>
      <div class="md:col-10" style="padding-left: 24px !important">
        <div class="grid marginTop row" style="margin-top: 16px !important">
          <div class="col-10">
            <span class="p-input-icon-left col-12">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                placeholder="Tìm kiếm theo từ khóa"
                formControlName="filter"
                (keyup.enter)="submitSearch()"
                style="width: 100%"
              />
            </span>
          </div>
          <div class="md:col-2 left">
            <p-button
              [style]="{ backgroundColor: '#01A9FF' }"
              (click)="isVisibleAddProject = true"
              >Thêm dự án mới</p-button
            >
          </div>
          <div
            class="col-10 grid"
            style="
              background-color: #f3f4f6;
              padding: 8px !important;
              margin-top: 12px !important;
            "
          >
            <div class="hienThi" style="padding-top: 5px">
              <span>Ưu tiên hiển thị</span>
            </div>
            <p-button class="hienThi" [style]="{ backgroundColor: '#01A9FF' }"
              >Phù hợp nhất</p-button
            >
            <p-button class="hienThi" [style]="{ backgroundColor: '#01A9FF' }"
              >Làm việc từ xa</p-button
            >
            <p-button class="hienThi" [style]="{ backgroundColor: '#01A9FF' }"
              >Khoảng cách</p-button
            >
            <p-button class="hienThi" [style]="{ backgroundColor: '#01A9FF' }"
              >Giai đoạn</p-button
            >
            <p-button class="hienThi" [style]="{ backgroundColor: '#01A9FF' }"
              >Quy mô</p-button
            >
            <p-paginator
              style="margin-left: 12px; margin-top: 10px; margin-bottom: 10px"
              [pageLinkSize]="pageSize"
              [rows]="pageSize"
              [totalRecords]="totalRecords"
              currentPageReportTemplate="Tổng {totalRecords}"
              [showCurrentPageReport]="true"
              [rowsPerPageOptions]="pageSizeOptions"
              (onPageChange)="onPageChange($event)"
            ></p-paginator>
          </div>
        </div>
        <p-dataView [value]="listProject" *ngIf="listProject.length > 0">
          <ng-template let-project pTemplate="listItem">
            <div
              class="col-12 md:col-4"
              style="padding: 8px 16px 8px 0 !important"
            >
              <app-project-item
                [project]="project"
                [relationWithProject]="formSearch.value.relationWithProject"
                (request)="requestToProject($event)"
                (accept)="acceptRequestFromProject($event)"
                (accept)="cancelRequestToProject($event)"
              ></app-project-item>
            </div>
          </ng-template>
        </p-dataView>
        <ng-container *ngIf="listProject.length == 0">
          <img
            width="300px"
            src="../../../../assets/img/nodata.jpg"
            alt=""
            style="margin: auto; justify-content: center; display: flex"
          />
        </ng-container>
      </div>
    </div>
  </div>
</form>

<ng-container *ngIf="isVisibleAddProject">
  <app-add-new-project
    [display]="isVisibleAddProject"
    (close)="isVisibleAddProject = false"
  ></app-add-new-project>
</ng-container>
