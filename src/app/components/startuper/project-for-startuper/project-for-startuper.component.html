<form [formGroup]="formSearch">
  <div class="body-content border-round-sm flex flex-row w-full p-4 px-4 md:px-6">
    <div class="flex-column hidden sm:flex w-2 mr-4" style="min-width: 200px;">
      <div class="mb-3">
        <i class="pi pi-filter mr-2"></i>
        <span class="font-semibold text-xl">Bộ lọc tìm kiếm</span>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Loại dự án</p>
        <p-dropdown [options]="relationWithProjects" optionValue="value" optionLabel="name" [style]="{ width: '100%' }"
          formControlName="relationWithProject" (onChange)="submitSearch()"></p-dropdown>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Mục đích hoạt động</p>
        <p-dropdown [options]="activePurposes" optionValue="value" optionLabel="name" [style]="{ width: '100%' }"
          formControlName="isProfit" (onChange)="submitSearch()"></p-dropdown>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Khu vực</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="areas" optionLabel="name"
          formControlName="areas">
        </p-multiSelect>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Lĩnh vực</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="fields" optionLabel="name"
          formControlName="fields">
        </p-multiSelect>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Giai đoạn</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="projectStages"
          optionLabel="name" formControlName="stages">
        </p-multiSelect>
      </div>
      <div class="p-field col-12 md-12">
        <p class="mb-1">Quy mô nhân sự</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="scales" optionLabel="name"
          formControlName="scales">
        </p-multiSelect>
      </div>
      <div class="p-field col-12">
        <div class="flex flex-row flex-wrap">
          <div style="width: 50%; padding-right: 6px" (click)="submitSearch()">
            <div style="
                  background-color: #3b82f6;
                  color: #ffffff;
                  padding: 12px;
                  border-radius: 4px;
                  cursor: pointer;
                " class="btnSearch">
              <span class="flex justify-content-center">Áp dụng</span>
            </div>
          </div>
          <div style="width: 50%; padding-left: 6px" (click)="clearSearch()">
            <div style="
                  background-color: #d8dfe8;
                  padding: 12px;
                  border-radius: 4px;
                  cursor: pointer;
                " class="btnClear">
              <span class="flex justify-content-center">Cài lại</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex flex-column w-full sm:w-10">
      <div class="flex flew-row align-items-center justify-content-between col-12 pt-0 mb-2">
        <div class="pr-3 block sm:hidden">
          <button pButton type="button" icon="pi pi-filter" (click)="display=true"
            class="p-button-raised p-button-rounded p-button-secondary"></button>
        </div>
        <span class="p-input-icon-left w-full">
          <i class="pi pi-search"></i>
          <input type="text" pInputText placeholder="Tìm kiếm theo từ khóa" formControlName="filter"
            (keyup.enter)="submitSearch()" style="width: 100%" />
        </span>
        <div class="min-w-max  pl-3">
          <p-button (click)="isVisibleAddProject = true">Thêm dự án mới</p-button>
        </div>
        <!-- <div
            class="col-10 grid"
            style="
              background-color: #e6e6e6;
              padding: 8px !important;
              margin-top: 12px !important;
              border-radius: 6px;
            "
          >
            <div class="hienThi" style="padding-top: 8px">
              <span>Sắp xếp theo</span>
            </div>
            <button
              pButton
              pRipple
              class="hienThi"
              type="button"
              [class]="styleBtnSuitable"
              (click)="sortingSearch('suitable')"
            >
              Phù hợp nhất
            </button>
            <button
              pButton
              pRipple
              type="button"
              class="hienThi"
              [class]="styleBtnAvailableTime"
              (click)="sortingSearch('availableTime')"
            >
              Làm việc từ xa
            </button>
            <button
              pButton
              pRipple
              type="button"
              class="hienThi"
              [class]="styleBtnYearOfExp"
              (click)="sortingSearch('yearOfExp')"
            >
              Quy mô
            </button>
          </div> -->
      </div>
      <p-dataView [value]="listProject" *ngIf="listProject.length > 0">
        <ng-template let-project pTemplate="listItem">
          <div class="col-12 md:col-6 lg:col-4 xl:col-3 p-2">
            <app-project-item [project]="project" [relationWithProject]="formSearch.value.relationWithProject"
              (request)="requestToProject($event)" (accept)="acceptRequestFromProject($event)"
              (cancel)="cancelRequestToProject($event)"></app-project-item>
          </div>
        </ng-template>
      </p-dataView>
      <ng-container *ngIf="listProject.length == 0">
        <img width="300px" src="../../../../assets/img/nodata.jpg" alt=""
          style="margin: auto; justify-content: center; display: flex" />
      </ng-container>
      <div class="flex justify-content-center">
        <p-paginator styleClass="mt-2" [pageLinkSize]="pageSize" [rows]="pageSize" [totalRecords]="totalRecords"
          currentPageReportTemplate="Hiển thị từ {first} đến {last} trên {totalRecords} dự án"
          [showCurrentPageReport]="true" [rowsPerPageOptions]="pageSizeOptions"
          (onPageChange)="onPageChange($event)"></p-paginator>
      </div>
    </div>
  </div>

  <p-sidebar [(visible)]="display">
    <div class="flex flex-column p-3">
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Loại dự án</p>
        <p-dropdown [options]="relationWithProjects" optionValue="value" optionLabel="name" [style]="{ width: '100%' }"
          formControlName="relationWithProject" (onChange)="submitSearch()"></p-dropdown>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Mục đích hoạt động</p>
        <p-dropdown [options]="activePurposes" optionValue="value" optionLabel="name" [style]="{ width: '100%' }"
          formControlName="isProfit" (onChange)="submitSearch();display=false"></p-dropdown>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Khu vực</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="areas" optionLabel="name" placeholder="Chọn khu vực"
          formControlName="areas">
        </p-multiSelect>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Lĩnh vực</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="fields" optionLabel="name"
          formControlName="fields">
        </p-multiSelect>
      </div>
      <div class="p-field col-12 md-12 pb-0">
        <p class="mb-1">Giai đoạn</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="projectStages"
          optionLabel="name" formControlName="stages">
        </p-multiSelect>
      </div>
      <div class="p-field col-12 md-12">
        <p class="mb-1">Quy mô nhân sự</p>
        <p-multiSelect optionLabel="name" optionValue="value" appendTo="body" [options]="scales" optionLabel="name"
          formControlName="scales">
        </p-multiSelect>
      </div>
      <div class="p-field col-12">
        <div class="flex flex-row flex-wrap">
          <div style="width: 50%; padding-right: 6px" (click)="submitSearch();display=false">
            <div style="
                  background-color: #3b82f6;
                  color: #ffffff;
                  padding: 12px;
                  border-radius: 4px;
                  cursor: pointer;
                " class="btnSearch">
              <span class="flex justify-content-center">Áp dụng</span>
            </div>
          </div>
          <div style="width: 50%; padding-left: 6px" (click)="clearSearch();display=false">
            <div style="
                  background-color: #d8dfe8;
                  padding: 12px;
                  border-radius: 4px;
                  cursor: pointer;
                " class="btnClear">
              <span class="flex justify-content-center">Cài lại</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </p-sidebar>

</form>

<ng-container *ngIf="isVisibleAddProject">
  <app-add-new-project [display]="isVisibleAddProject" (close)="isVisibleAddProject = false"></app-add-new-project>
</ng-container>