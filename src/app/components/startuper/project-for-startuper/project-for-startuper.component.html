<form [formGroup]="formSearch">
  <div class="body-content">
    <div class="grid row">
      <div class="md:col-2">
        <h2 class="boLoc" style="margin-top: 16px !important">
          <svg
            width="21"
            height="19"
            viewBox="0 0 21 19"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style="margin-right: 12px"
          >
            <path
              d="M0.7 3.74955H0.7994C0.95219 4.39278 1.30064 4.96313 1.7897 5.37049C2.27876 5.77785 2.88055 5.999 3.5 5.999C4.11945 5.999 4.72124 5.77785 5.2103 5.37049C5.69936 4.96313 6.04781 4.39278 6.2006 3.74955H20.3C20.4857 3.74955 20.6637 3.67053 20.795 3.52986C20.9263 3.3892 21 3.19842 21 2.9995C21 2.80057 20.9263 2.6098 20.795 2.46913C20.6637 2.32847 20.4857 2.24945 20.3 2.24945H6.2006C6.04781 1.60622 5.69936 1.03587 5.2103 0.628509C4.72124 0.221149 4.11945 0 3.5 0C2.88055 0 2.27876 0.221149 1.7897 0.628509C1.30064 1.03587 0.95219 1.60622 0.7994 2.24945H0.7C0.514348 2.24945 0.336301 2.32847 0.205025 2.46913C0.0737498 2.6098 0 2.80057 0 2.9995C0 3.19842 0.0737498 3.3892 0.205025 3.52986C0.336301 3.67053 0.514348 3.74955 0.7 3.74955ZM3.5 1.4994C3.77689 1.4994 4.04757 1.58738 4.2778 1.75221C4.50803 1.91704 4.68747 2.15133 4.79343 2.42544C4.89939 2.69954 4.92712 3.00116 4.8731 3.29215C4.81908 3.58314 4.68574 3.85044 4.48995 4.06023C4.29416 4.27002 4.0447 4.41289 3.77313 4.47077C3.50155 4.52866 3.22006 4.49895 2.96424 4.38541C2.70843 4.27187 2.48978 4.0796 2.33594 3.83291C2.18211 3.58622 2.1 3.29619 2.1 2.9995C2.1 2.60165 2.2475 2.22009 2.51005 1.93877C2.7726 1.65744 3.1287 1.4994 3.5 1.4994ZM20.3 9.74995H20.2006C20.0478 9.10672 19.6994 8.53637 19.2103 8.12901C18.7212 7.72165 18.1194 7.5005 17.5 7.5005C16.8806 7.5005 16.2788 7.72165 15.7897 8.12901C15.3006 8.53637 14.9522 9.10672 14.7994 9.74995H0.7C0.514348 9.74995 0.336301 9.82897 0.205025 9.96963C0.0737498 10.1103 0 10.3011 0 10.5C0 10.6989 0.0737498 10.8897 0.205025 11.0304C0.336301 11.171 0.514348 11.25 0.7 11.25H14.7994C14.9522 11.8933 15.3006 12.4636 15.7897 12.871C16.2788 13.2783 16.8806 13.4995 17.5 13.4995C18.1194 13.4995 18.7212 13.2783 19.2103 12.871C19.6994 12.4636 20.0478 11.8933 20.2006 11.25H20.3C20.4857 11.25 20.6637 11.171 20.795 11.0304C20.9263 10.8897 21 10.6989 21 10.5C21 10.3011 20.9263 10.1103 20.795 9.96963C20.6637 9.82897 20.4857 9.74995 20.3 9.74995ZM17.5 12.0001C17.2231 12.0001 16.9524 11.9121 16.7222 11.7473C16.492 11.5825 16.3125 11.3482 16.2066 11.0741C16.1006 10.8 16.0729 10.4983 16.1269 10.2073C16.1809 9.91635 16.3143 9.64906 16.51 9.43927C16.7058 9.22948 16.9553 9.0866 17.2269 9.02872C17.4984 8.97084 17.7799 9.00055 18.0358 9.11409C18.2916 9.22763 18.5102 9.4199 18.6641 9.66659C18.8179 9.91328 18.9 10.2033 18.9 10.5C18.9 10.8979 18.7525 11.2794 18.49 11.5607C18.2274 11.8421 17.8713 12.0001 17.5 12.0001ZM20.3 17.2505H13.2006C13.0478 16.6072 12.6994 16.0369 12.2103 15.6295C11.7212 15.2222 11.1194 15.001 10.5 15.001C9.88055 15.001 9.27876 15.2222 8.7897 15.6295C8.30064 16.0369 7.95219 16.6072 7.7994 17.2505H0.7C0.514348 17.2505 0.336301 17.3295 0.205025 17.4701C0.0737498 17.6108 0 17.8016 0 18.0005C0 18.1994 0.0737498 18.3902 0.205025 18.5309C0.336301 18.6715 0.514348 18.7506 0.7 18.7506H7.7994C7.95219 19.3938 8.30064 19.9641 8.7897 20.3715C9.27876 20.7789 9.88055 21 10.5 21C11.1194 21 11.7212 20.7789 12.2103 20.3715C12.6994 19.9641 13.0478 19.3938 13.2006 18.7506H20.3C20.4857 18.7506 20.6637 18.6715 20.795 18.5309C20.9263 18.3902 21 18.1994 21 18.0005C21 17.8016 20.9263 17.6108 20.795 17.4701C20.6637 17.3295 20.4857 17.2505 20.3 17.2505ZM10.5 19.5006C10.2231 19.5006 9.95243 19.4126 9.7222 19.2478C9.49197 19.083 9.31253 18.8487 9.20657 18.5746C9.10061 18.3005 9.07288 17.9988 9.1269 17.7078C9.18092 17.4169 9.31426 17.1496 9.51005 16.9398C9.70584 16.73 9.9553 16.5871 10.2269 16.5292C10.4984 16.4713 10.7799 16.501 11.0358 16.6146C11.2916 16.7281 11.5102 16.9204 11.6641 17.1671C11.8179 17.4138 11.9 17.7038 11.9 18.0005C11.9 18.3984 11.7525 18.7799 11.4899 19.0612C11.2274 19.3426 10.8713 19.5006 10.5 19.5006Z"
              fill="black"
            />
          </svg>
          Bộ lọc tìm kiếm
        </h2>
        <div class="p-field col-12 md-12 marginTop">
          <p-dropdown
            [options]="relationWithProjects"
            optionValue="value"
            optionLabel="name"
            [style]="{ width: '100%' }"
            formControlName="relationWithProject"
            (onChange)="submitSearch()"
          ></p-dropdown>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-dropdown
            [options]="activePurposes"
            optionValue="value"
            optionLabel="name"
            [style]="{ width: '100%' }"
            formControlName="isProfit"
            (onChange)="submitSearch()"
            defaultLabel="Mục đích hoạt động"
          ></p-dropdown>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="areas"
            optionLabel="name"
            formControlName="areas"
            defaultLabel="Khu vực"
          >
          </p-multiSelect>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="fields"
            optionLabel="name"
            formControlName="fields"
            defaultLabel="Lĩnh vực"
          >
          </p-multiSelect>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="projectStages"
            optionLabel="name"
            formControlName="stages"
            defaultLabel="Giai đoạn"
          >
          </p-multiSelect>
        </div>
        <div class="p-field col-12 md-12 marginTop">
          <p-multiSelect
            optionLabel="name"
            optionValue="value"
            appendTo="body"
            [options]="scales"
            optionLabel="name"
            formControlName="scales"
            defaultLabel="Quy mô nhân sự"
          >
          </p-multiSelect>
        </div>
        <div class="col-12 mt-2">
          <div class="grid">
            <div
              style="width: 50%; padding-right: 6px"
              (click)="submitSearch()"
            >
              <div
                style="
                  background-color: #3b82f6;
                  color: #ffffff;
                  padding: 12px;
                  border-radius: 4px;
                  cursor: pointer;
                "
                class="btnSearch"
              >
                <span class="flex justify-content-center">Áp dụng</span>
              </div>
            </div>
            <div style="width: 50%; padding-left: 6px" (click)="clearSearch()">
              <div
                style="
                  background-color: #d8dfe8;
                  padding: 12px;
                  border-radius: 4px;
                  cursor: pointer;
                "
                class="btnClear"
              >
                <span class="flex justify-content-center">Cài lại</span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="md:col-10" style="padding-left: 24px !important">
        <div class="grid marginTop row" style="margin-top: 16px !important">
          <div class="col-10">
            <span class="p-input-icon-left col-12">
              <i class="pi pi-search"></i>
              <input
                type="text"
                pInputText
                placeholder="Tìm kiếm theo từ khóa"
                formControlName="filter"
                (keyup.enter)="submitSearch()"
                style="width: 100%"
              />
            </span>
          </div>
          <div class="md:col-2 left">
            <p-button (click)="isVisibleAddProject = true"
              >Thêm dự án mới</p-button
            >
          </div>
          <!-- <div
            class="col-10 grid"
            style="
              background-color: #e6e6e6;
              padding: 8px !important;
              margin-top: 12px !important;
              border-radius: 6px;
            "
          >
            <div class="hienThi" style="padding-top: 8px">
              <span>Sắp xếp theo</span>
            </div>
            <button
              pButton
              pRipple
              class="hienThi"
              type="button"
              [class]="styleBtnSuitable"
              (click)="sortingSearch('suitable')"
            >
              Phù hợp nhất
            </button>
            <button
              pButton
              pRipple
              type="button"
              class="hienThi"
              [class]="styleBtnAvailableTime"
              (click)="sortingSearch('availableTime')"
            >
              Làm việc từ xa
            </button>
            <button
              pButton
              pRipple
              type="button"
              class="hienThi"
              [class]="styleBtnYearOfExp"
              (click)="sortingSearch('yearOfExp')"
            >
              Quy mô
            </button>
          </div> -->
        </div>
        <p-dataView [value]="listProject" *ngIf="listProject.length > 0">
          <ng-template let-project pTemplate="listItem">
            <div
              class="col-12 md:col-4"
              style="padding: 0px 16px 16px 0 !important"
            >
              <app-project-item
                [project]="project"
                [relationWithProject]="formSearch.value.relationWithProject"
                (request)="requestToProject($event)"
                (accept)="acceptRequestFromProject($event)"
                (accept)="cancelRequestToProject($event)"
              ></app-project-item>
            </div>
          </ng-template>
        </p-dataView>
        <ng-container *ngIf="listProject.length == 0">
          <img
            width="300px"
            src="../../../../assets/img/nodata.jpg"
            alt=""
            style="margin: auto; justify-content: center; display: flex"
          />
        </ng-container>
        <div class="flex justify-content-center">
          <p-paginator
            style="margin-left: 12px; margin-top: 10px"
            [pageLinkSize]="pageSize"
            [rows]="pageSize"
            [totalRecords]="totalRecords"
            currentPageReportTemplate="Hiển thị từ {first} đến {last} trên {totalRecords} dự án"
            [showCurrentPageReport]="true"
            [rowsPerPageOptions]="pageSizeOptions"
            (onPageChange)="onPageChange($event)"
          ></p-paginator>
        </div>
      </div>
    </div>
  </div>
</form>

<ng-container *ngIf="isVisibleAddProject">
  <app-add-new-project
    [display]="isVisibleAddProject"
    (close)="isVisibleAddProject = false"
  ></app-add-new-project>
</ng-container>
