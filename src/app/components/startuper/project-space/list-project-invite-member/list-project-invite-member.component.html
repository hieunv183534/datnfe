<p-dialog [resizable]="true" header="Thêm thành viên dự án" [(visible)]="display" [modal]="true"
  [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" (onHide)="hide()">
  <div class="grid p-fluid">
    <p-table #dt [value]="inviteUsers" [rowHover]="true" dataKey="id" class="w-full mt-3"
      styleClass="p-datatable-customers p-datatable-gridlines p-datatable-striped p-datatable-sm"
      [globalFilterFields]="['code','name']">
      <ng-template pTemplate="caption">
        <div class="flex flex-column md:flex-row md:justify-content-between table-header">
          <span class="flex justify-content-between w-full">
            <input type="text" pInputText placeholder="Tìm theo sdt/ email" class="mr-10" style="width: 90%;"
              [(ngModel)]="keySearchUser" />
            <p-button icon="pi pi-search" (onClick)="submitSearchUser()"></p-button>
          </span>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr class="ng-star-inserted">
          <th>
            <div class="flex justify-content-between align-items-center">
              Tài khoản
            </div>
          </th>
          <th>
            <div class="flex justify-content-between align-items-center">
              Sdt/Email
            </div>
          </th>
          <th>
            <div class="flex justify-content-between align-items-center">
              Thao tác
            </div>
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-user>
        <tr>
          <td>
            <span class="flex align-items-center">
              <p-avatar shape="circle" [image]="user.avatarUrl ?? 'https://fsiconnected.cloud/images/default-avatar.jpg'"></p-avatar>
              <p class="ml-4">{{user.name}}</p>
            </span>
          </td>
          <td>
            {{user.key}}
          </td>
          <td>
            <button *ngIf="!user.status" pButton pRipple icon="pi pi-telegram" pTooltip="Mời vào dự án"
              tooltipPosition="top" class="p-button-rounded mr-2 p-button-sm" (click)="inviteUser(user.id)"></button>

            <p *ngIf="user.status">Đã gửi yêu cầu</p>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="8">Không tồn tại dữ liệu.</td>
        </tr>
      </ng-template>
    </p-table>

    <button pButton pRipple type="button" label="Tìm kiếm thành viên mới từ trang nhà khởi ngiệp" class="p-button-outlined mt-3 col-12" (click)="goToStartuper()"></button>
    <p class="col-11">Để việc tìm kiếm thành viên từ trang nhà khởi nghiệp mang hiệu quả cao nhất, hãy mô tả về yêu cầu của bạn ở đây</p>
    <p-button class="col-1 p-button-secondary" icon="pi pi-id-card" (onClick)="isShowRequestInfo = true"></p-button>
  </div>
</p-dialog>

<ng-container *ngIf="isShowRequestInfo">
  <app-request-info [display]="isShowRequestInfo" (close)="isShowRequestInfo = false" [projectId]="projectId" ></app-request-info>
</ng-container>
